
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

const resources = {
  en: {
    translation: {
      languages: {
        autoDetect: 'Auto Detect',
        english: 'English',
        chineseTraditional: 'Chinese (Traditional)',
        chineseTraditionalHK: 'Chinese (Traditional) HK',
        chineseSimplified: 'Chinese (Simplified)',
        spanish: 'Spanish',
        japanese: 'Japanese',
        french: 'French',
        german: 'German',
        korean: 'Korean',
        russian: 'Russian',
        portuguese: 'Portuguese',
        italian: 'Italian',
      },
      translationInput: {
        online: 'Online',
        offline: 'Offline',
        cameraAriaLabel: 'Translate from camera',
        settingsAriaLabel: 'Open settings',
        placeholderListening: 'Listening...',
        placeholderEnterText: 'Enter text to translate',
        clearText: 'Clear text',
        recordingStop: 'Stop recording',
        recordingStart: 'Start recording',
        cancelTranslation: 'Cancel Translation',
        translateOffline: 'Translate using offline model',
        translate: 'Translate',
        countdown: 'Time left: {{seconds}}s',
      },
      translationOutput: {
        modeOnline: 'Mode: Online ({{provider}})',
        modeOfflineInitializing: 'Mode: Offline ({{modelName}}) - Initializing...',
        modeOfflineReady: 'Mode: Offline ({{modelName}})',
        modeOfflineNotReady: 'Mode: Offline ({{modelName}}) - Model not ready',
        modeOfflineNoModel: 'Mode: Offline - No model selected',
        flipScreenAriaLabel: 'Flip screen',
        copyAriaLabel: 'Copy translated text',
        historyAriaLabel: 'View translation history',
        clearAriaLabel: 'Clear translated text',
        placeholder: 'Translation',
        speakStop: 'Stop speaking',
        speakCustomVoice: 'Speak with custom voice',
        speakFemale: 'Speak with female voice',
        speakMale: 'Speak with male voice',
        astStop: 'Stop speech translation',
        astStart: 'Start speech translation',
        astTitle: 'Automatic Speech Translation',
      },
      settings: {
        title: 'Settings',
        closeAriaLabel: 'Close settings',
        tabOnline: 'Online',
        tabOffline: 'Offline LLM',
        tabSpeech: 'Offline Speech',
        subTabModels: 'LLM Models',
        subTabParameters: 'Model Parameters',
        providerLabel: 'Provider',
        providerGemini: 'Gemini',
        providerOpenAI: 'OpenAI',
        openaiUrlLabel: 'OpenAI API URL',
        openaiUrlPlaceholder: 'e.g., https://api.openai.com',
        apiKeyLabel: 'API Key',
        apiKeyPlaceholder: 'Enter your Gemini or OpenAI API Key',
        modelNameLabel: 'Model Name',
        modelNameGeminiPlaceholder: 'e.g., gemini-2.5-flash',
        modelNameOpenAIPlaceholder: 'e.g., gpt-4o',
        manageModelsLabel: 'Select & Download Offline LLM Model',
        addCustomModelTitle: 'Add Custom Model',
        customModelUrlLabel: 'Hugging Face Model URL',
        customModelUrlPlaceholder: 'e.g., https://huggingface.co/org/repo',
        customModelLibUrlLabel: 'Model Library URL (.wasm)',
        customModelLibUrlPlaceholder: 'e.g., https://.../lib.wasm',
        addCustomModelButton: 'Download and Use Custom Model',
        asrModelLabel: 'Select & Download Offline Speech Recognition Model (ASR)',
        modelCached: 'Cached',
        modelDownload: 'Download',
        modelDownloading: 'Downloading...',
        deleteModelAriaLabel: 'Delete {{modelName}} from cache',
        clearCacheButton: 'Clear LLM Model Cache',
        clearCacheDescription: 'Removes all downloaded LLM models from your browser cache.',
        clearAsrCacheButton: 'Clear ASR Model Cache',
        enableOfflineLabel: 'Enable Offline Translation',
        enableOfflineDescription: 'Use local model for translations.',
        enableOfflineAsrLabel: 'Enable Offline Speech Recognition',
        enableOfflineAsrDescription: 'Use local model for speech input. If off, uses browser\'s speech API.',
        enableTwoStepLabel: 'High-Accuracy JP→ZH Mode',
        enableTwoStepDescription: 'Improves Japanese to Chinese translation via English.',
        audioProcessingLabel: 'Audio Processing (Offline ASR)',
        enableNoiseCancellationLabel: 'Enable Noise Cancellation',
        enableNoiseCancellationDescription: 'Applies a high-pass filter to reduce low-frequency background noise.',
        audioGainLabel: 'Microphone Gain',
        ttsSettingsLabel: 'Text-to-Speech (TTS) Settings',
        enableCustomTtsLabel: 'Enable Custom Offline TTS',
        enableCustomTtsDescription: 'Customize the voice for text-to-speech.',
        voiceLabel: 'Voice',
        voicePlaceholder: 'No voices available for {{languageName}}',
        rateLabel: 'Rate',
        pitchLabel: 'Pitch',
        temperatureLabel: 'Temperature',
        maxTokensLabel: 'Max Tokens',
        presencePenaltyLabel: 'Presence Penalty',
        frequencyPenaltyLabel: 'Frequency Penalty',
        clearSettingsButton: 'Clear All Settings & Data',
        saveSettingsButton: 'Save Settings',
        languageLabel: 'UI Language',
        clearAllAriaLabel: 'Clear all settings and cached models',
      },
      history: {
        title: 'Translation History',
        closeAriaLabel: 'Close history',
        empty: 'No history yet.',
        selectAriaLabel: 'Select translation from {{sourceLang}} to {{targetLang}}',
        clearAriaLabel: 'Clear all translation history',
        clearButton: 'Clear History',
      },
      camera: {
        title: 'Camera Translation View',
        closeAriaLabel: 'Close camera view',
        errorAccess: 'Could not access the camera. Please ensure permissions are granted.',
        errorCapture: 'Failed to capture image: {{message}}',
        errorLoad: 'Failed to load image: {{message}}',
        zoomAriaLabel: 'Zoom camera',
        galleryAriaLabel: 'Import from gallery',
        captureAriaLabel: 'Capture and process image',
        processingAriaLabel: 'Processing image',
        flashOffAriaLabel: 'Turn on flash',
        flashOnAriaLabel: 'Turn off flash',
      },
      notifications: {
        offlineModelInitSuccess: 'Offline model {{modelIdentifier}} initialized successfully.',
        offlineModelInitFailed: 'Failed to load offline model.',
        translationFailed: 'Translation Failed: {{errorMessage}}',
        speechError: 'Speech synthesis error: {{error}}',
        speechRecognitionError: 'Speech recognition error: {{error}}',
        selectLanguageError: 'Please select a specific language to use speech recognition.',
        astSelectLanguage: 'Please select a source language before using speech translation.',
        astOfflineError: 'You are offline. Cannot use online speech translation.',
        processingImage: '[Processing image...]',
        offlineImageTranslateError: 'You are offline. Cannot use online image translation.',
        imageProcessingFailed: 'Image Processing Failed: {{errorMessage}}',
        offlineFeatureUnavailable: 'This feature is not available in offline mode.',
        cacheCleared: 'Offline model cache has been cleared successfully.',
        downloadInProgress: 'A model is already being downloaded. Please wait.',
        modelDownloaded: 'Model {{modelId}} downloaded successfully.',
        modelDeleted: 'Model {{modelId}} deleted successfully.',
        customModelUrlError: 'Please provide both the model URL and the model library URL.',
        customModelSelected: 'Custom model has been selected.',
        cacheClearError: 'Please enable offline mode and select a model before clearing the cache.',
        transcribing: '[Transcribing...]',
        asrReady: 'Speech recognition model is ready.',
        asrFailed: 'Failed to initialize speech recognition model: {{error}}',
        asrModelDeleted: 'ASR model cache cleared successfully.',
        asrOnlineUnavailable: 'Offline ASR is only available in Offline Translation Mode.',
        modelIdleUnloaded: 'Offline model unloaded due to inactivity to save resources. It will reload on next use.',
      },
      asrStatus: {
        webSpeech: 'Browser API',
        initializing: 'Initializing {{modelName}} ({{progress}}%)...',
        ready: '{{modelName}} Ready',
        notReady: '{{modelName}} Not Ready',
        notReadySimple: 'Not Ready',
        noModelSelected: 'No Model Selected',
      },
    },
  },
  'zh-TW': {
    translation: {
      languages: {
        autoDetect: '自動偵測',
        english: '英文',
        chineseTraditional: '繁體中文',
        chineseTraditionalHK: '繁體中文 (香港)',
        chineseSimplified: '簡體中文',
        spanish: '西班牙文',
        japanese: '日文',
        french: '法文',
        german: '德文',
        korean: '韓文',
        russian: '俄文',
        portuguese: '葡萄牙文',
        italian: '義大利文',
      },
      translationInput: {
        online: '線上',
        offline: '離線',
        cameraAriaLabel: '使用相機翻譯',
        settingsAriaLabel: '開啟設定',
        placeholderListening: '正在聆聽...',
        placeholderEnterText: '輸入要翻譯的文字',
        clearText: '清除文字',
        recordingStop: '停止錄音',
        recordingStart: '開始錄音',
        cancelTranslation: '取消翻譯',
        translateOffline: '使用離線模型翻譯',
        translate: '翻譯',
        countdown: '剩餘時間：{{seconds}}秒',
      },
      translationOutput: {
        modeOnline: '模式：線上 ({{provider}})',
        modeOfflineInitializing: '模式：離線 ({{modelName}}) - 初始化中...',
        modeOfflineReady: '模式：離線 ({{modelName}})',
        modeOfflineNotReady: '模式：離線 ({{modelName}}) - 模型未就緒',
        modeOfflineNoModel: '模式：離線 - 未選擇模型',
        flipScreenAriaLabel: '翻轉螢幕',
        copyAriaLabel: '複製翻譯結果',
        historyAriaLabel: '檢視翻譯歷史',
        clearAriaLabel: '清除翻譯結果',
        placeholder: '翻譯結果',
        speakStop: '停止朗讀',
        speakCustomVoice: '使用自訂語音朗讀',
        speakFemale: '使用女聲朗讀',
        speakMale: '使用男聲朗讀',
        astStop: '停止語音翻譯',
        astStart: '開始語音翻譯',
        astTitle: '即時語音翻譯',
      },
      settings: {
        title: '設定',
        closeAriaLabel: '關閉設定',
        tabOnline: '線上',
        tabOffline: '離線 LLM',
        tabSpeech: '離線語音',
        subTabModels: 'LLM 模型',
        subTabParameters: '模型參數',
        providerLabel: '服務提供商',
        providerGemini: 'Gemini',
        providerOpenAI: 'OpenAI',
        openaiUrlLabel: 'OpenAI API URL',
        openaiUrlPlaceholder: '例如：https://api.openai.com',
        apiKeyLabel: 'API 金鑰',
        apiKeyPlaceholder: '輸入您的 Gemini 或 OpenAI API 金鑰',
        modelNameLabel: '模型名稱',
        modelNameGeminiPlaceholder: '例如：gemini-2.5-flash',
        modelNameOpenAIPlaceholder: '例如：gpt-4o',
        manageModelsLabel: '選擇並下載離線 LLM 模型',
        addCustomModelTitle: '新增自訂模型',
        customModelUrlLabel: 'Hugging Face 模型 URL',
        customModelUrlPlaceholder: '例如：https://huggingface.co/org/repo',
        customModelLibUrlLabel: '模型庫 URL (.wasm)',
        customModelLibUrlPlaceholder: '例如：https://.../lib.wasm',
        addCustomModelButton: '下載並使用自訂模型',
        asrModelLabel: '選擇並下載離線語音辨識模型 (ASR)',
        modelCached: '已快取',
        modelDownload: '下載',
        modelDownloading: '下載中...',
        deleteModelAriaLabel: '從快取中刪除 {{modelName}}',
        clearCacheButton: '清除 LLM 模型快取',
        clearCacheDescription: '從您的瀏覽器快取中移除所有已下載的 LLM 模型。',
        clearAsrCacheButton: '清除 ASR 模型快取',
        enableOfflineLabel: '啟用離線翻譯',
        enableOfflineDescription: '使用本機模型進行翻譯。',
        enableOfflineAsrLabel: '啟用離線語音辨識',
        enableOfflineAsrDescription: '使用本機模型進行語音輸入。若關閉，則使用瀏覽器內建的語音 API。',
        enableTwoStepLabel: '高準確度 日→中 模式',
        enableTwoStepDescription: '透過英文中轉，提升日文到中文的翻譯品質。',
        audioProcessingLabel: '音訊處理 (離線 ASR)',
        enableNoiseCancellationLabel: '啟用降噪',
        enableNoiseCancellationDescription: '應用高通濾波器以減少低頻背景噪音。',
        audioGainLabel: '麥克風增益',
        ttsSettingsLabel: '文字轉語音 (TTS) 設定',
        enableCustomTtsLabel: '啟用自訂離線 TTS',
        enableCustomTtsDescription: '自訂文字轉語音的聲音。',
        voiceLabel: '語音',
        voicePlaceholder: '沒有適用於 {{languageName}} 的語音',
        rateLabel: '速率',
        pitchLabel: '音高',
        temperatureLabel: '溫度 (Temperature)',
        maxTokensLabel: '最大令牌 (Max Tokens)',
        presencePenaltyLabel: '話題新穎度 (Presence Penalty)',
        frequencyPenaltyLabel: '頻率懲罰 (Frequency Penalty)',
        clearSettingsButton: '清除所有設定和資料',
        saveSettingsButton: '儲存設定',
        languageLabel: '介面語言',
        clearAllAriaLabel: '清除所有設定和快取模型',
      },
      history: {
        title: '翻譯歷史',
        closeAriaLabel: '關閉歷史紀錄',
        empty: '尚無歷史紀錄。',
        selectAriaLabel: '選擇從 {{sourceLang}} 到 {{targetLang}} 的翻譯',
        clearAriaLabel: '清除所有翻譯歷史',
        clearButton: '清除歷史',
      },
      camera: {
        title: '相機翻譯畫面',
        closeAriaLabel: '關閉相機畫面',
        errorAccess: '無法存取相機。請確認已授予權限。',
        errorCapture: '擷取影像失敗：{{message}}',
        errorLoad: '載入影像失敗：{{message}}',
        zoomAriaLabel: '縮放相機',
        galleryAriaLabel: '從相簿匯入',
        captureAriaLabel: '擷取並處理影像',
        processingAriaLabel: '正在處理影像',
        flashOffAriaLabel: '開啟閃光燈',
        flashOnAriaLabel: '關閉閃光燈',
      },
      notifications: {
        offlineModelInitSuccess: '離線模型 {{modelIdentifier}} 初始化成功。',
        offlineModelInitFailed: '載入離線模型失敗。',
        translationFailed: '翻譯失敗：{{errorMessage}}',
        speechError: '語音合成錯誤：{{error}}',
        speechRecognitionError: '語音辨識錯誤：{{error}}',
        selectLanguageError: '請選擇一個具體語言以使用語音辨識功能。',
        astSelectLanguage: '使用語音翻譯前，請先選擇來源語言。',
        astOfflineError: '您處於離線狀態，無法使用線上語音翻譯。',
        processingImage: '[正在處理影像...]',
        offlineImageTranslateError: '您處於離線狀態，無法使用線上影像翻譯。',
        imageProcessingFailed: '影像處理失敗：{{errorMessage}}',
        offlineFeatureUnavailable: '此功能在離線模式下不可用。',
        cacheCleared: '已成功清除離線模型快取。',
        downloadInProgress: '已有模型正在下載，請稍候。',
        modelDownloaded: '模型 {{modelId}} 下載成功。',
        modelDeleted: '模型 {{modelId}} 刪除成功。',
        customModelUrlError: '請同時提供模型 URL 和模型庫 URL。',
        customModelSelected: '已選擇自訂模型。',
        cacheClearError: '請先啟用離線模式並選擇一個模型，然後再清除快取。',
        transcribing: '[語音轉換文字中...]',
        asrReady: '語音辨識模型已就緒。',
        asrFailed: '語音辨識模型初始化失敗：{{error}}',
        asrModelDeleted: 'ASR 模型快取已清除成功。',
        asrOnlineUnavailable: '離線 ASR 僅在離線翻譯模式下可用。',
        modelIdleUnloaded: '離線模型因閒置而卸載以節省資源，下次使用時將自動重新載入。',
      },
      asrStatus: {
        webSpeech: '瀏覽器 API',
        initializing: '正在初始化 {{modelName}} ({{progress}}%)...',
        ready: '{{modelName}} 已就緒',
        notReady: '{{modelName}} 未就緒',
        notReadySimple: '未就緒',
        noModelSelected: '未選擇模型',
      },
    },
  },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    debug: true,
    interpolation: {
      escapeValue: false, // React already does escaping
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
    },
  });

export default i18n;